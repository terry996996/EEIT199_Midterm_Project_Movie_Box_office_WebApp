<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>註冊</title>
<link rel="stylesheet" th:href="@{/css/styles.css}" type="text/css" />
</head>
<body>

	<div align="center">
		<h2>註冊帳號</h2>
		<form th:action="@{/register}" method="post" th:object="${user}">
			<label>帳號：</label> <input type="text" th:field="*{account}"
				id="account" />
			<div th:if="${#fields.hasErrors('account')}" th:errors="*{account}"
				style="color: red"></div>
			<div style="color: red;" th:unless="${#fields.hasErrors('account')}"
				th:errors="*{account}"></div>
			<br /> <label>密碼：</label> <input type="password"
				th:field="*{password}" />
			<div style="color: red;" th:if="${#fields.hasErrors('password')}"
				th:errors="*{password}"></div>
			<br /> <br>
			<button type="submit" id="submitBtn">送出註冊</button>
			<br> <br> <a th:href="@{login}">取消註冊，返回登入頁面~</a>
		</form>
	</div>

</body>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const accountInput = document.getElementById('account');
    const submitBtn = document.getElementById('submitBtn');

    accountInput.addEventListener('input', function () {
        const errorDiv = document.querySelector('[th\\:errors="*{account}"]');
        if (errorDiv && errorDiv.textContent.includes("帳號已被使用")) {
            submitBtn.disabled = true;
        } else {
            submitBtn.disabled = false;
        }
    });
});
</script>
</html>

