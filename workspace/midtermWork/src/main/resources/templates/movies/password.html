<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>修改密碼</title>
<link rel="stylesheet" th:href="@{/css/styles.css}" type="text/css" />
</head>
<body>

	<div id="testdiv" align="center">
		<img id="floatingMouse" th:src="@{/images/cat.gif}"
			style="width: 100px; position: fixed;" />

		<div align="center">
			<h1 align="center">修改密碼</h1>

			<span th:if="${session.user != null}"
				style="font-size: larger; color: rgb(227, 29, 187)">
				使用者:&nbsp;&nbsp;<b th:text="${session.user.account}"
				style="font-size: larger; color: rgb(227, 29, 187)">使用者</b>
			</span> <br> <br>

			<div style="text-align: center;">
				<div
					style="display: inline-flex; gap: 15px; flex-wrap: wrap; justify-content: center;">

					<div class="menu-button">
						<a th:href="@{/movies/index}">回首頁</a>
					</div>

					<div class="menu-button">
						<a th:href="@{/movies/findall}">查看所有電影列表</a>
					</div>

					<div class="menu-button">
						<a th:href="@{/movies/create}">新增電影</a>
					</div>

					<div class="menu-button">
						<a th:href="@{/movies/upload}">上傳檔案</a>
					</div>

					<div class="menu-button">
						<a th:href="@{/movies/advanced-search}">進階搜尋</a>
					</div>

					<div class="menu-button active">
						<span>修改密碼</span>
					</div>

					<div class="menu-button">
						<a th:href="@{/logout}">登出</a>
					</div>

				</div>
			</div>


			<br> <br>

			<div id="temp2" class="form-container">
				<form th:action="@{/changePassword}" method="post">

					<div class="form-group">
						<label class="label-group">輸入原密碼</label> <input
							class="input-group" type="password" name="oldPassword"
							placeholder="原密碼" required />
					</div>

					<div class="form-group">
						<label class="label-group">輸入新密碼</label><input class="input-group"
							type="password" name="newPassword" placeholder="新密碼" required />
					</div>

					<div class="form-group">
						<label class="label-group">確認新密碼</label><input class="input-group"
							type="password" name="confirmPassword" placeholder="再次輸入新密碼"
							required />
					</div>

					<div class="form-group">
						<button class="form-button" type="submit">確認送出</button>
					</div>

					<p style="color: red;" th:if="${error}" th:text="${error}"></p>
					<p style="color: green;" th:if="${success}" th:text="${success}"></p>
				</form>

			</div>
		</div>
	</div>

	<script>
			const imgTag = document.querySelector('#floatingMouse');
	 				document.querySelector("#testdiv")
			 				.addEventListener('mousemove', (e) => {
    						const offset = 5;
    						const imgWidth = imgTag.offsetWidth;
    						const imgHeight = imgTag.offsetHeight;
    						const x = Math.min(window.innerWidth - imgWidth, e.clientX + offset);
    						const y = Math.min(window.innerHeight - imgHeight, e.clientY + offset);

    						imgTag.style.left = `${x}px`;
    						imgTag.style.top = `${y}px`;
			  		});
		</script>

</body>
</html>
